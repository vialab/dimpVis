//Data representing co-occurence scores between car parts over time
//Car accident report dataset from the NHTSA: http://www.nhtsa.gov/
//From years 1981 to 2009
//format: [row,col,score]
var dataset = [
  [[4,4,1], [5,5,1]], //1981
  [[3,3,5]], //1982
  [[3,3,1],[4,4,1],[5,5,3]], //1983
  [[1,4,1],[1,1,3],[2,2,1],[3,3,4],[4,4,6],[4,6,1],[5,5,2],[6,6,1]], //1984
  [[1,1,2],[2,2,1],[3,3,10],[4,4,2],[5,5,1]], //1985
  [[1,1,3],[2,2,2],[3,3,11],[4,4,8],[5,5,1],[6,6,1]], //1986
  [[1,1,5],[2,2,9],[2,3,2],[3,3,16],[4,4,11],[4,5,1],[4,6,1],[5,5,16],[6,6,4]], //1987
  [[1,1,6],[2,2,7],[3,3,20],[4,4,15],[5,5,10],[5,6,1],[6,6,5]], //1988
  [[1,2,1],[1,4,1],[1,1,19],[2,2,4],[2,4,1],[2,5,1],[3,3,37],[3,5,2],[3,6,2],[4,4,26],[4,5,2],[5,5,33],[5,6,3],[6,6,7]], //1989
  [[1,4,2],[1,5,3],[1,1,34],[2,2,17],[2,3,1],[2,5,1],[2,6,1],[3,3,60],[3,4,3],[3,6,3],[4,4,28],[4,6,3],[5,5,58],[5,6,8],[6,6,20]], //1990
  [[1,2,3],[1,4,4],[1,5,4],[1,1,49],[2,2,38],[2,3,2],[2,4,3],[2,5,19],[3,3,130],[3,4,23],[3,5,3],[3,6,6],[4,4,61],[4,5,1],[4,6,1],[5,5,121],[5,6,17],[6,6,42]], //1991
  [[1,2,1],[1,3,11],[1,4,5],[1,5,2],[1,6,1],[1,1,108],[2,2,77],[2,3,3],[2,4,16],[2,5,25],[2,6,6],[3,3,171],[3,5,3],[4,4,128],[4,5,16], [4,6,7], [5,5,236], [5,6,31], [6,6,62]], //1992
  [[1,2,4],[1,4,28],[1,5,20],[1,6,1],[1,1,196],[2,2,122],[2,3,10],[2,4,20],[2,5,30],[2,6,10],[3,3,289],[3,4,11], [3,5,1], [4,4,195], [4,5,45], [4,6,4], [5,5,447], [5,6,68], [6,6,131]], //1993
  [[1,2,34],[1,3,7],[1,4,71],[1,5,38],[1,6,16],[1,1,705],[2,2,490],[2,3,13],[2,4,20],[2,5,56],[2,6,19],[3,3,1056],[3,4,30],[3,5,43],[3,6,14],[4,4,707],[4,5,58],[4,6,20],[5,5,1374],[5,6,176],[6,6,390]],//1994
  [[1,2,34],[1,3,12],[1,4,99],[1,5,74],[1,6,17],[1,1,1581],[2,2,1187],[2,3,42],[2,4,71],[2,5,165],[2,6,37],[3,3,3171],[3,4,11],[3,5,56],[3,6,8],[4,4,1789],[4,5,115],[4,6,38],[5,5,3676],[5,6,393],[6,6,1126]], //1995
  [[1,2,49],[1,3,50],[1,4,222],[1,5,158],[1,6,46],[1,1,1856],[2,2,1487],[2,3,74],[2,4,46],[2,5,220], [2,6,52],[3,3,2842],[3,4,50],[3,5,118],[3,6,24],[4,4,2379],[4,5,168],[4,6,72],[5,5,3997],[5,6,701],[6,6,1367]], //1996
  [[1,2,79],[1,3,40],[1,4,275],[1,5,147],[1,6,50],[1,1,1821],[2,2,1315],[2,3,64], [2,4,61], [2,5,233], [2,6,65],[3,3,1977],[3,4,70],[3,5,131],[3,6,16],[4,4,2339],[4,5,233],[4,6,79],[5,5,3554],[5,6,786],[6,6,1381]], //1997
  [[1,2,102],[1,3,73],[1,4,490],[1,5,242],[1,6,53],[1,1,2898],[2,2,1910],[2,3,90],[2,4,137],[2,5,382],[2,6,78],[3,3,2545],[3,4,111],[3,5,202],[3,6,39], [4,4,3935], [4,5,384], [4,6,109], [5,5,4028], [5,6,649], [6,6,1299]], //1998
  [[1,2,202],[1,3,115],[1,4,851],[1,5,384],[1,6,123],[1,1,3874],[2,2,2968],[2,3,179],[2,4,247],[2,5,611],[2,6,171],[3,3,2978],[3,4,155],[3,5,240],[3,6,71],[4,4,5915],[4,5,664],[4,6,181],[5,5,5280], [5,6,844],[6,6,1825]], //1999
  [[1,2,207],[1,3,78],[1,4,912],[1,5,337],[1,6,161],[1,1,3825],[2,2,3581],[2,3,170],[2,4,304],[2,5,679],[2,6,167],[3,3,2927],[3,4,200],[3,5,247],[3,6,102],[4,4,6809],[4,5,622],[4,6,232],[5,5,5385],[5,6,901], [6,6,1914]], //2000
  [[1,2,261],[1,3,126],[1,4,793],[1,5,409],[1,6,136], [1,1,3562],[2,2,3748],[2,3,206],[2,4,431],[2,5,638],[2,6,165],[3,3,3596],[3,4,187],[3,5,228],[3,6,64],[4,4,7016],[4,5,738],[4,6,279],[5,5,5160],[5,6,891],[6,6,1922]], //2001
  [[1,2,196],[1,3,124],[1,4,687],[1,5,247],[1,6,74],[1,1,3137],[2,2,3298],[2,3,176],[2,4,261], [2,5,527],[2,6,150],[3,3,3309], [3,4,199], [3,5,234], [3,6,73], [4,4,6073], [4,5,505], [4,6,209], [5,5,4267], [5,6,653], [6,6,1653]], //2002
  [[1,2,296], [1,3,187],[1,4,957],[1,5,453],[1,6,142],[1,1,5059],[2,2,4348],[2,3,213],[2,4,397],[2,5,593],[2,6,131],[3,3,4006],[3,4,278],[3,5,230], [3,6,80],[4,4,8155],[4,5,660],[4,6,224],[5,5,5155], [5,6,616], [6,6,1823]], //2003
  [[1,2,301],[1,3,163],[1,4,949], [1,5,362],[1,6,182],[1,1,4957],[2,2,5305],[2,3,271], [2,4,411], [2,5,785], [2,6,252], [3,3,3863],[3,4,237],[3,5,243],[3,6,93],[4,4,8010],[4,5,612],[4,6,298], [5,5,5751], [5,6,966], [6,6,2510]], //2004
  [[1,2,256],[1,3,137],[1,4,740],[1,5,219],[1,6,116],[1,1,3497],[2,2,4520],[2,3,231],[2,4,403],[2,5,711],[2,6,142],[3,3,3418],[3,4,180],[3,5,215],[3,6,51],[4,4,7068],[4,5,571],[4,6,254],[5,5,5186],[5,6,635],[6,6,1920]], //2005
  [[1,2,201],[1,3,94],[1,4,815],[1,5,245],[1,6,181],[1,1,3409],[2,2,3620],[2,3,197],[2,4,325],[2,5,477],[2,6,144],[3,3,3242],[3,4,141],[3,5,139],[3,6,93],[4,4,6763],[4,5,523],[4,6,341],[5,5,3726],[5,6,523],[6,6,1957]], //2006
  [[1,2,195],[1,3,72],[1,4,791],[1,5,184],[1,6,161],[1,1,3471],[2,2,3516],[2,3,181],[2,4,302], [2,5,413], [2,6,174],[3,3,2890], [3,4,187],[3,5,110],[3,6,48],[4,4,7192],[4,5,538],[4,6,310], [5,5,3505],[5,6,542], [6,6,1951]], //2007
  [[1,2,157],[1,3,53],[1,4,763],[1,5,182],[1,6,162],[1,1,3951],[2,2,3695],[2,3,189],[2,4,273],[2,5,382],[2,6,143],[3,3,3023],[3,4,138],[3,5,106],[3,6,50],[4,4,6736],[4,5,367],[4,6,338],[5,5,3302],[5,6,496],[6,6,1986]], //2008
  [[1,2,156],[1,3,39],[1,4,883],[1,5,150], [1,6,163], [1,1,4164], [2,2,3818],[2,3,141],[2,4,298], [2,5,410], [2,6,127], [3,3,2741],[3,4,122], [3,5,101],[3,6,40],[4,4,6932], [4,5,400],[4,6,492],[5,5,4566], [5,6,696], [6,6,2905]] //2009

];

/**entity ids: 1- transmission, 2- wheel, 3- seat, 4- engine, 5- brakes,6- pedal */
var xLabels = yLabels = ["transmission", "wheel","seat","engine","brakes","pedal"];
var xLength = xLabels.length;
var yLength = yLabels.length;
var years = [1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009];

//Reformat the dataset to match the expected format specified in Heatmap.js
var data = [];
var dataCounter = 0;
for (var row=0;row<xLength;row++){
    for (var col=0;col<yLength;col++){
      //Add a new entry for each row,column pair
      data[dataCounter] = {"row":row,"column":col,"values":[]};
      //Search for values in the dataset (which has missing entries for some pairs, in this case the score is 0)
      for (var j=0;j<dataset.length;j++){
          var found = false;
          for (var k=0;k<dataset[j].length;k++){
              if (dataset[j][k][0]==row && dataset[j][k][1]==col){
                  found = true;
                  break;
              }
          }
          data[dataCounter].values[j] = (found)? dataset[j][k][2]:0;
      }
      dataCounter++;
    }
}


